<!DOCTYPE html>
<html lang="en">

<!-- Madeline Thomas: Data Science for Economists Project 2022/23 -->

<!-- //////////////////////////////////// HTML HEAD //////////////////////////////////// -->

<head>

    <!-- The following lines are used to enable the Vega embed -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
 
    <!-- Page Title (not visible on page - in head section)-->
    <title>Madeline Thomas - Project</title>
 
    <!--Favicon-->
    <link rel="shortcut icon" href="MTFavicon.png" />
 
    <!-- Linking to CSS file -->
    <link rel="stylesheet" href="style.css">
 
    <!-- Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css?family=Raleway');
    </style>

</head>

<!-- //////////////////////////////////// END OF HEAD //////////////////////////////////// -->



<!-- //////////////////////////////////// BODY //////////////////////////////////// -->

<body>
    <!--Background animation-->
    <div class="bganim">
        <div class="bg1">

            <!--Navigation Bar-->
            <div class="nav-bar">
                <a href="#" class="active">Project</a>
                <a href="portfolio.html">Portfolio</a>
                <a href="index.html">Home</a>
                <a href="https://github.com/maddyht20/maddyht20.github.io/">Github</a>
                <a href="https://rapidcharts.io/datascience">Course</a>
            </div>

            <div>
                <!-- Visible Header Bar on Page -->
                <div class="heading">
                    <h1>Data <span style="color: #707793"> Science</span></h1>
                    <h1 style="color:#eee"><b>Project</b></h1>
                    <p>Madeline Thomas<span style="color: #eee"> | </span><span style="color: #94d7c8">1901117</span></p>
                </div>

                <!-- Project Question in its own box just below main heading bar -->
                <div class="subheading">
                    <h1>What factors influence how charitable countries are?</h1>
                </div>
            </div>

            <br></br>
        

      <!-- PROJECT MAIN CONTENT -->
            
            <!-- Box with text inside saying project overview -->
            <div class="content">
                <div class="content-box">
                    <div class="content-box-new">
                        <h2>Project Overview</h2>
                    </div>
                </div>
            </div>

            <!-- Section with text about the aim and overview of the project -->
            <div class="content-box">
                <div class="maincontents">
                    <p>Why are some countries’ populations more charitable than others? The aim of this project is to explore global trends in charitable giving across time, and to obtain an answer to this question.</p>
                    <p>The analysis performed in this project can be used by policymakers and charities to understand how best to target fundraising efforts and predict how charitable giving may change in the future (for instance, in the event of another pandemic).</p>
                    <p>All data relating to charitable giving were scraped by me from pdf copies of CAF’s annual World Giving Index (WGI) Reports that I batch downloaded and merged using for loops in Python. I was able to scrape the data in a structured format using tabula-py. These WGI reports compile results from a yearly survey conducted by Gallup in which a random sample of people in around 120 countries are asked whether they have done any of the following in the past month:</p>
                    <div class="content-box">
                        <div class="content-box-new">
                            <p>Helped a stranger?</p>
                            <p>Donated money to charity?</p>
                            <p>Volunteered time?</p>
                        </div>
                    </div>
                    <p>Interestingly, a country’s WGI score, which is the average percentage of the population who answer yes to these three questions, is therefore determined not by how much people in the country donate, but by whether they donate money or time at all.</p>         
                    <p>I was able to automate much of the process required to obtain the CAF data I sought, but because the tables were read strangely in tabula (probably because the tables extended over multiple pages), I saved the tabula output as a csv file and had to manually shift the data into appropriate columns in Excel. After shifting the data, I read this new csv in Colab using pandas, and cleaned the file in Colab.</p>
                    <p>Though the countries explored in each chart are relatively consistent, a few countries drop in and out of the charts due to gaps in some of the data sources.</p>
                    <p>Note that none of the charts below use 2019 data as no WGI Report was produced for 2019 due to the pandemic.</p>
                </div>
            </div>
            

            <div class="separator">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>
        
        
            <!-- Box for sub question 1 to help me answer main question -->
            <div class="content">
                <div class="content-box">
                    <div class="content-box-new">
                        <h2>Part 1: What are the trends in charitable giving across countries and time?</h2>
                    </div>
                </div>
            </div>
        
            <!-- Section with text answering sub question one -->
            <div class="content-box">
                <div class="maincontents">
                    <p>Although very interesting, this project does not explore reasons for the global changes in charitability over time seen in the above charts, it just shows that these temporal trends exist. What the following charts do instead, is to try to understand in a static context (i.e. just looking at data for 2021 (or as close to this year as is complete and available to me)) why some countries’ populations are more charitable than others.</p>
                    <p>The first graph shows the trend in WGI scores and its three constituent component’s scores across countries and time. We see that among the three charitable giving acts, helping a stranger is the most commonly performed. </p>
                    <div class="content-box">
                        <!--Chart 1 - Overall patterns between countries and over time -->
                        <div class="chartpr1" id="Chart1"></div>
                        <br></br>
                        <div class="clickerbox">
                            <br></br>
                            <a class="clicker" href="https://colab.research.google.com/drive/1j6l8LbuqWfz33WmN2A4AgfAV18-ogS2Z?usp=sharing" target="_blank"><b>Colab (Data Collection)</b></a>
                        </div>
                    </div>
                    <br></br>
                    <p>Click any data point in Chart 2 to be shown the data for that country on both graphs. Click white space on either graph to reset.</p>
                    <!--Chart 2 - Top 15 countries change in ranking -->
                    <div class="content-box">
                        <div class="chartpr2" id="Chart2"></div>
                        <br></br>
                        <div class="clickerbox">
                            <br></br>
                            <a class="clicker" href="https://colab.research.google.com/drive/1j6l8LbuqWfz33WmN2A4AgfAV18-ogS2Z?usp=sharing" target="_blank"><b>Colab (Data Collection)</b></a>
                        </div>
                    </div>
                    <p>Compared to earlier years, there were clear changes in giving behaviours in 2020 around the world. Many of the countries ranked among the top 10 for WGI scores in 2017, like the Netherlands, slipped to much lower rankings in 2020. This may have been the result of the pandemic making opportunities to perform charitable acts scarcer in some countries.</p>
                    <!--Chart 2 - Overall time trend -->
                    <div class="content-box">
                        <div class="chartpr3" id="Chart3"></div>
                        <br></br>
                        <div class="clickerbox">
                            <br></br>
                            <a class="clicker" href="https://colab.research.google.com/drive/1j6l8LbuqWfz33WmN2A4AgfAV18-ogS2Z?usp=sharing" target="_blank"><b>Colab (Data Collection)</b></a>
                        </div>
                    </div>
                <p>Despite the pandemic, the WGI score rose in considerably more countries between 2017 and 2021 than it fell in. The mean WGI score around the world was over 5 percentage points higher in 2021 than in 2017. </p>
                </div>
            </div>


            <div class="separator">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>


            <!-- Box for sub question 2 to help me answer main question -->
            <div class="content">
                <div class="content-box">
                    <div class="content-box-new">
                        <h2>Part 2: What factors might explain the differences in charitability between countries?</h2>
                    </div>
                </div>
            </div>

            <!-- Section with text answering sub question one -->
            <div class="content-box">
                <div class="maincontents">
                    <p>To see what variables might be driving the patterns in country-level charitability we saw in the charts above, I merged the CAF data with economic (GDP per capita), social (religion) and demographic (median age) data.</p>
                    <p>I extracted GDP data from two sources - World Bank, and World Population Review. I scraped this data using Python’s Pandas library tools. The World Bank was an ideal source as I was able to use Python’s World Bank API package to scrape this data, and the data series updates automatically as soon as new data is released by World Bank, but it did not have data for 2022, hence my use of a second source. I scraped data on country-level religiosity levels and median age from Wikipedia and Worldometers, respectively, using the same Colab notebook that contained my CAF data.</p>
                    <p>I initially tried to create the below Kepler map in Vega in the same way I created Chart 1. However, the desirable feature on Kepler maps is that viewers can hide and unhide data sets, enabling me to include data for religiosity, median age and GDP per capita in one chart without causing information overload.</p>
                    <p>There is no clear colour pattern on the Kepler map for any of the potential driving factors. There are countries with a low religiosity level and high WGI score, and countries with high religiosity level and low WGI score, for instance.</p>
                    <div class="content-box">
                        <!--Chart 4 - Kepler Chart: GDP, Religiosity and Median Age-->
                        <div id="ChartKepler"></div>
                        <iframe src="https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/ibssoqissntlnck/keplergl_f9zkn3u.json" width="700" height="500"></iframe>
                        <div id="ChartKepler"></div>
                        <br></br>
                        <table>
                        <tr>
                            <td><div class="chartpr4" id="ChartP"></div></td>
                            <td><div class="chartpr4" id="ChartQ"></div></td> 
                            <td><div class="chartpr4" id="ChartV"></div></td> 
                        </tr>
                        </table>
                        <br></br>
                        <div class="clickerbox">
                            <br></br>
                            <a class="clicker" href="https://colab.research.google.com/drive/1j6l8LbuqWfz33WmN2A4AgfAV18-ogS2Z?usp=sharing" target="_blank"><b>Colab (Data Collection)</b></a>
                            <a class="clicker" href="https://colab.research.google.com/drive/1V3pfJcTs5q_GR1Y95gL5VGBp8xdgMhcG?usp=sharing" target="_blank"><b>Colab (Mapping GDPpc)</b></a>
                            <a class="clicker" href="https://colab.research.google.com/drive/1pP8yHXMRhyAIOiqebcT-ZQjS8kWInt-s?usp=sharing" target="_blank"><b>Colab (Mapping Religiosity)</b></a>
                            <a class="clicker" href="https://colab.research.google.com/drive/12XNp3PwqYzTwlox4ehn20GEhVAB9IeFE?usp=sharing" target="_blank"><b>Colab (Mapping Median Age)</b></a>
                        </div>
                    </div>
                    <br></br>
                    <p>This sentiment is echoed by the regression charts below, which suggest that not much of the variation in charitable giving across countries is explained by any of the three factors in question (hence their low R^2 scores).</p>
                    <br></br>
                    <!--Chart 7 - Regressions: GDP, Religiosity and Median Age-->
                    <div class="content-box">
                        <table>
                            <tr>
                            <td><div class="chartpr7" id="Chart7"></div></td>
                            <td><div class="chartpr7" id="Chart8"></div></td> 
                            <td><div class="chartpr7" id="Chart9"></div></td>
                            </tr>
                        </table> 
                        <br></br>
                        <div class="clickerbox">
                            <br></br>
                            <a class="clicker" href="https://colab.research.google.com/drive/1j6l8LbuqWfz33WmN2A4AgfAV18-ogS2Z?usp=sharing" target="_blank"><b>Colab (Data Collection)</b></a>
                            <a class="clicker" href="https://colab.research.google.com/drive/1S4dvcplP6Db3AcEueSAE39NZkgnaMAhO?usp=sharing" target="_blank"><b>Colab (Regressions)</b></a>
                        </div>
                    </div>
                    <br></br>
                    <p>Although religiosity does not seem to be driving the global patterns we see, the type of religion that is predominant in each country may still be important. Countries with buddhism as their main religion, are, on average, the most charitable, followed by Christianity. But at the same time, some Buddhist and Christian countries appear low in the WGI rankings, shown by the chart on the left.</p>
                    <!--Chart 5 + 6 - Main Religion impact on WGI-->
                    <div class="content-box">
                        <table>
                            <tr>
                            <td><div class="chartpr5" id="Chart5"></div></td>
                            <td><div class="chartpr6" id="Chart6"></div></td> 
                            </tr>
                        </table>
                        <br></br>
                        <div class="clickerbox">
                            <br></br>
                            <a class="clicker" href="https://colab.research.google.com/drive/1j6l8LbuqWfz33WmN2A4AgfAV18-ogS2Z?usp=sharing" target="_blank"><b>Colab (Data Collection)</b></a>
                        </div>
                    </div>
                </div>
            </div>


            <div class="separator">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>


            <h2>SOURCES AND DATA FILES</h2>

            <div class="content-box">
                <div class="maincontents">
                    <div class="extra">
                    <p><b><u>Chart 1:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 2:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 3:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 4:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 5:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 6:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 7:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                    <p><b><u>Chart 8:<u/></b></p>
                    <p>Source: <a href=""></a> & <a href=""></a> | CSV: <a href=""></a></p>
                </div>
                </div>
            </div>

        </div>
    </div>

<footer></footer>

</body>

<!-- //////////////////////////////////// END OF BODY //////////////////////////////////// -->

<script>
    // Define charts
    var myChart1 = "Chart1proj.json";
    var myChart2 = "Chart3proj.json";
    var myChart3 = "Chart2proj.json";
    // var myChart4 = "Chart4proj.json";
    var myChart5 = "Chart5proj.json";
    var myChart6 = "Chart6proj.json";
    var myChart7 = "Chart7proj.json";
    var myChart8 = "Chart8proj.json";
    var myChart9 = "Chart9proj.json";
    var myChartP = "ChartPproj.json";
    var myChartQ = "ChartQproj.json";
    var myChartV = "ChartVproj.json";
    // Embed charts
    vegaEmbed('#Chart1', myChart1);
    vegaEmbed('#Chart2', myChart2);
    vegaEmbed('#Chart3', myChart3);
    // vegaEmbed('#Chart4', myChart4);
    vegaEmbed('#Chart5', myChart5);
    vegaEmbed('#Chart6', myChart6);
    vegaEmbed('#Chart7', myChart7);
    vegaEmbed('#Chart8', myChart8);
    vegaEmbed('#Chart9', myChart9);
    vegaEmbed('#ChartP', myChartP);
    vegaEmbed('#ChartQ', myChartQ);
    vegaEmbed('#ChartV', myChartV);
</script>

</html>
